<!-- -->
<section>
  <title>{{ user.name | uppercase }} {{ user.first }}</title>

  <div user-pop></div>
  <div my-nav class="nav-fix"></div>

  <div class="main-wrapper">

    <div class="profil-header">

      <div class="profil-section">
          <img src="toolbox/asset/images/default.png" width="150"/>
      </div>
      <div class="profil-section">
        <blockquote>
          <p>{{ user.name | uppercase }} {{ user.first }}</p>
          <p>{{ user.age }} ans</p>
          <p>Bureau :{{ user.office }}</p>
          <i class="fa fa-thumbs-up fa-2x text-info" aria-hidden="true"></i>{{ user.mark.up }}
          <i class="fa fa-thumbs-down fa-2x text-danger" aria-hidden="true"></i>{{ user.mark.down }}
        </blockquote>
      </div>
      <div class="profil-section">
        <blockquote>
          <img src="toolbox/asset/images/car.png" width="50" height="50"/>
          <p>Marque : {{ user.car.brand }}</p>
          <p>Modèle : {{ user.car.model }}</p>
          <p>Année : {{ user.car.year }}</p>
        </blockquote>
      </div>

    </div><div style="clear:both;"></div>

    <hr/>

    <div class="profil">
      <a href="" class="btn btn-success" ng-click="rideProposal(user)">Proposer un Trajet</a>
      <a href="#/rides" class="btn btn-primary">Rechercher un Trajet</a>
      <a href="" class="btn btn-warning" ng-click="">Demandes <span class="badge">3</span></a>

      <!--
         - Comming Rides
       -->
      <div class="panel panel-default"><!--  -->
        <h3>
          Trajets à venir
          <a href="" ng-hide="comming" ng-click="comming = true"><i class="fa fa-chevron-down"></i></a>
          <a href="" ng-show="comming" ng-click="comming = false"><i class="fa fa-chevron-up"></i></a>
        </h3>
        <div ng-show="comming">

        <!-- Passenger Box -->
        <div class="panel panel-primary content"><!-- ng-repeat="ride in p_comming_rides" -->
          <div class="panel-heading">
            <h4 class="panel-title">Passager</h4>
          </div>
          <div class="panel-body">
            <div class="box-section">
              <a href="" ng-click="userPop(ride.user)">
                <img src="toolbox/asset/images/default.png" width="100" height="100"/>
              </a>
            </div>
            <div class="box-section">
              <p>Driver : {{ ride.user.name | uppercase }} {{ ride.user.first }}</p>
              <p>{{ ride.departure }} <i class="fa fa-arrow-right fa-1x"></i> {{ ride.arrival }}</p>
              <p>Le {{ ride.date }} à {{ ride.hour }}</p>
              <p>Places Disponibles : {{ ride.seats }}</p>
            </div>
            <div class="box-section check">
              <i ng-show="false" class="fa fa-check-circle fa-3x text-success"></i>
              <i ng-show="true" class="fa fa-exclamation-circle fa-3x text-warning"></i>
            </div>
          </div>
        </div>

        <!-- Driver Box -->
        <div><!-- ng-repeat="ride in d_comming_rides"-->

        <div class="panel panel-success content">
          <div class="panel-heading">
            <h4 class="panel-title">Conducteur</h4>
          </div>
          <div class="panel-body">
            <div class="box-section">
              <p>Trajet N°</p>
              <h2 ng-bind="ride.number"></h2>
            </div>
            <div class="box-section">
              <p><b ng-bind="ride.departure"></b><i class="fa fa-arrow-right fa-1x"></i><b ng-bind="ride.arrival"></b></p>
              <p ng-bind="'Le '+ride.date+' à '+ride.hour"></p>
              <p ng-bind="'Vous proposez '+ride.seats+' places.'"></p>
            </div>
            <div class="box-section">
              <ul class="nav nav-pills">
                <li class="active"><a href="" ng-click="dcr_details = true">Demandes<span class="badge" ng-bind="ride.request"></span></a></li>
              </ul>
            </div>
          </div>
        </div>

        <div ng-show="dcr_details" class="panel panel-default content">
          <div class="panel-body">
            <p class="text-primary times"><i class="fa fa-times fa-2x" ng-click="details = false"></i></p>
            <p class="text-danger" ng-bind="'Attention, il ne vous reste que '+ride.remain+' places disponibles !'"></p>
            <p class="text-danger" ng-hide="ride.remain > 0">Vous n'avez plus de place disponible sur ce trajet</p>
            <div class="box-section-lg">
              <h4></h4>
              <table>
                <thead>
                  <th>Participants à valider</th>
                  <th>Réponse</th>
                  <th>
                </thead>
                <tbody>
                </tbody>
              </table>
                <tr><!-- participant in ride.asks -->

                  <p ng-bind"user.name | uppercase +' '+ user.first">
                  <i class="fa fa-times fa-1x text-danger" ng-click="refusePassenger(ride,participant)"></i>
                  <i class="fa fa-check fa-1x text-success" ng-click="acceptPassenger(ride,participant)"></i>
                </tr>
              </table>
              </p>
            </div>
            <div class="box-section-lg">
              <h4>Participants validés</h4>
              <p ng-bind="user.name | uppercase +' '+ user.first"></p><!-- ng-repeat="participant in ride.accepted" -->
            </div>
          </div>
        </div>

      </div>

        </div>
      </div>

      <!--
         - Over Rides
       -->
      <div class="panel panel-default">
        <h3>
          Trajets passés
          <a href="" ng-hide="over" ng-click="over = true"><i class="fa fa-chevron-down"></i></a>
          <a href="" ng-show="over" ng-click="over = false"><i class="fa fa-chevron-up"></i></a>
        </h3>
        <div ng-show="over">

        <!-- Passenger Box -->
        <div class="panel panel-primary content"><!-- ng-repeat="ride in p_over_rides" -->
          <div class="panel-heading">
            <h4 class="panel-title">Passager</h4>
          </div>
          <div class="panel-body">
            <div class="box-section">
              <a href="" ng-click="userPop(ride.user)">
                <img src="toolbox/asset/images/default.png" width="100" height="100"/>
              </a>
            </div>
            <div class="box-section">
              <p>Driver : {{ ride.user.name | uppercase }} {{ ride.user.first }}</p>
              <p>{{ ride.departure }} <i class="fa fa-arrow-right fa-1x"></i> {{ ride.arrival }}</p>
              <p>Le {{ ride.date }} à {{ ride.hour }}</p>
              <p>Places Disponibles : {{ ride.seats }}</p>
            </div>
            <div class="box-section check">
              <p>Noter ce conducteur</p>
              <i class="fa fa-thumbs-up fa-2x" ng-click="markDriverUp(ride.driver)"></i>
              <i class="fa fa-thumbs-down fa-2x" ng-click="markDriverDown(ride.driver)"></i>
            </div>
          </div>
        </div>

        <!-- Driver Box -->
        <div><!-- ng-repeat="ride in d_over_rides" -->

        <div class="panel panel-success content">
          <div class="panel-heading">
            <h4 class="panel-title">Conducteur</h4>
          </div>
          <div class="panel-body">
            <div class="box-section">
              <p>Trajet N°</p>
              <h2 ng-bind="ride.number"></h2>
            </div>
            <div class="box-section">
              <p><b ng-bind="ride.departure"></b><i class="fa fa-arrow-right fa-1x"></i><b ng-bind="ride.arrival"></b></p>
              <p ng-bind="'Le '+ride.date+' à '+ride.hour"></p>
              <p ng-bind="'Vous avez proposé '+ride.seats+' places.'"></p>
            </div>
            <div class="box-section">
              <ul class="nav nav-pills">
                <li class="active"><a href="" ng-click="details = true">Passager(s)<span class="badge" ng-bind="ride.passengers.length"></span></a></li>
              </ul>
            </div>
          </div>
        </div>

        <div ng-show="details" class="panel panel-default content">
          <div class="panel-body">
            <div class="box-section-lg">
              <h4>Personnes ayant participées à ce projet</h4>
              <table>
                <tr><!-- ng-repeat="user in ride.participants" -->
                  <td>
                    <p ng-repeat="user in participants" ng-bind"user.name | uppercase +' '+ user.first"></p>
                  </td>
                  <td>
                    <i class="fa fa-thumbs-up fa-2x" ng-click="markPassengerUp(ride,user)"></i>
                    <i class="fa fa-thumbs-down fa-2x" ng-click="markPassengerDown(ride,user)"></i>
                  </td>
                </tr>
              </table>

            </div>
          </div>
        </div>

      </div>

      </div>
      </div>

      <!--
         - Refused Rides
       -->
      <div class="panel panel-default">
        <h3 class="text-danger">
          Trajets Refusés
          <a href="" ng-hide="refused" ng-click="refused = true"><i class="fa fa-chevron-down"></i></a>
          <a href="" ng-show="refused" ng-click="refused = false"><i class="fa fa-chevron-up"></i></a>
        </h3>
        <div ng-show="refused">

          <!-- Passenger Box -->
          <div class="panel panel-primary content"><!-- ng-repeat="ride in p_refused_rides" -->
            <div class="panel-heading">
              <h2 class="panel-title">Passager</h2>
            </div>
            <div class="panel-body">
              <a href="" ng-click="userPop(ride.user)">
                <img src="toolbox/asset/images/default.png" width="100" height="100"/>
              </a>
            </div>
          </div>

        </div>
      </div>

    </div>

</div>
</section>
